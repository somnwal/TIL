# 20221210_코틀린_마이크로서비스_개발

&nbsp;

[책 >>](http://www.yes24.com/Product/Goods/68796734)

&nbsp;
&nbsp;


### 마이크로서비스(MSA)

```
- 모듈방식으로 세분화된 기능을 제공한는 느슨하게 결합된 서비스
- 관심 사항을 물리적으로 분리해 독립적으로 설계, 개발, 테스트, 배포 가능
- 애자일 방법론 + 데브옵스 문화에 적합
```

### SoA (Service Oriented Architecture)

```
- 애플리케이션 컴포넌트 기반으로 구성
- 컴포넌트는 원격으로 액세스 가능한 서비스로 구성
- 자기 완비적
```

### n-프리티어 아키텍처

```
- 어플리케이션 레이어
  - 프레젠테이션 레이어 : 사용자를 위한 UI (컴포넌트)
  - 비즈니스 레이어 : 비즈니스 기능을 위한 도메인 로직 구현 (서비스)
  - 데이터 레이어 : 도메인 모델 관리
```

&nbsp;
&nbsp;

### 마이크로서비스(MSA)와 SoA의 차이점

```
- 마이크로서비스
  - 각 마이크로서비스는 다른  서비스와 완전히 분리
  - 각각 자체 데이터를 소유하면서 서로 영향없이 변경 가능
  - 독립 배포 가능
  - 각 모듈의 출시 주기를 다르게 구성가능
  - 개별적인 확장 가능
  - SoA가 진화하여 MSA가 됨

- SoA
  - 일체형 어플리케이션
  - ESB(Enterprise Service Bus) 사용
    - 서비스의 조정, 매핑, 라우팅 담당하는 소프트웨어 컴포넌트
```

&nbsp;
&nbsp;

### 마이크로서비스(MSA) 원칙

&nbsp;

##### 느슨한 결합

```
- 결합도가 낮은 서비스
- 본인의 정보만 반환하고, 다른 서비스의 정보 반환은 최대한 피함
```

##### 단일 책임

```
- 모든 마이크로서비스는 애플리케이션에서 제공하는 기능 중 단일 부분에 대한 책임만 진다.
```

##### 구현은닉

```
- 내부의 세부사항을 공개하지 않는다.
- 비즈니스 규칙을 노출하지 않는다.
```

##### 격리

```
- 서비스하는 시스템의 인프라와 논리, 물리적으로 분리됨
```

##### 독립적인 배포 가능

```
- 독립적으로 배포되지 않으면 MSA의 장점이 경감됨
```

##### 장애를 고려한 빌드

```
- 업스트림
    - 서비스 사용자에게 어떻게 오류를 알릴것인지, 알리지 않을것인지에 대한 내용
- 다운스트림
    - 사용하는 다른 서비스나 데이터베이스 같은 시스템 장애 시 어떻게 대응할 것인지에 대한 내용
- 로깅
- 모니터링
- 경고
- 복구
- 폴백
    - MSA가 장애 상황이더라도 최소한의 의미있는 정보라도 제공
```

##### 확장성

```
- 마이크로서비스는 독립적으로 확장 가능
```

##### 자동화

```
- 구축 > 테스트 > 배치 > 모니터링까지 모두 자동화로 이루어지게 설계
```

&nbsp;
&nbsp;

### 도메인 주도 설계(DDD, Domain-Driven Design)

```
- 모델이 적용되는 컨텍스트를 정의
- 명시적인 경계를 설정하고 경계 안에서 모델을 엄격히 일관되게 유지
```

&nbsp;
&nbsp;

### 리액티브 프로그래밍

```
- 작업을 구독하고 작업이 완료되면 그 결과를 갖고서 다른 작업을 실행
- 넌블로킹 작업
- 리액티브 스트림을 구성하면, 데이터가 준비될 때마다 결과를 보낼 수 있음
```

##### 리액티브 선언문

```
1. 응답성
    - 오류가 나더라도 어플리케이션이 먹통되는거 안됨!
    - 사용자에게 원활하고 예측 가능한 경험을 제공 해야함
2. 복원성
3. 탄력성
4. 메시지 기반
    - 비동기 메시징을 사용해 격리된 시스템을 상호 연결
```